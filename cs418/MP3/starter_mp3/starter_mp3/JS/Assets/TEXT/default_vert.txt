
attribute vec4 vPosition;
attribute vec3 vNormal;

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 modelMatrix;
uniform mat3 normalMatrix;


uniform vec3 uLightPosition;

varying vec3 LightVector;               
varying vec3 viewVector;                
varying vec3 transformedVertexNormal;   


varying vec3 vColor;
varying mat3 invMat;

void main()
{   

    
    vec4 transformedVertexPosition = viewMatrix * modelMatrix * (vPosition);
    transformedVertexNormal  = normalMatrix * vNormal;
    
    vec3 tVP = transformedVertexPosition.xyz/ transformedVertexPosition.w;
    LightVector = (((((( viewMatrix * vec4(uLightPosition, 1.0)).xyz - tVP)))));
    viewVector = -transformedVertexPosition.xyz;

    vColor = vec3(1.0, 0.0, 1.0);
    
    invMat = normalMatrix;
    
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vPosition;
}  
